<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>She-Shield</title>

<style>
:root{
  --pink:#ff6f91;
  --beige:#fff1dc;
  --dark:#3a2c2c;
}
*{box-sizing:border-box;font-family:system-ui,Arial}
body{
  margin:0;
  background:linear-gradient(180deg,var(--beige),#ffe4ef);
  color:var(--dark);
}
header{
  text-align:center;
  padding:16px;
}
h1{margin:0;color:#d6336c}
.card{
  background:white;
  margin:12px;
  padding:14px;
  border-radius:14px;
  box-shadow:0 8px 20px rgba(0,0,0,.12);
}
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
}
.sos{background:#ff3b3b;color:white}
.secondary{background:var(--pink);color:white}
.stop{background:#ddd}
.row{display:flex;gap:10px}
small{opacity:.7}

#enable{
  position:fixed;
  inset:0;
  background:#000000dd;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
#enableBox{
  background:white;
  padding:20px;
  border-radius:14px;
  text-align:center;
  width:90%;
  max-width:320px;
}
</style>
</head>

<body>

<!-- ENABLE SCREEN -->
<div id="enable">
  <div id="enableBox">
    <h2>Enable Safety System</h2>
    <p><small>Required for sound, voice & location</small></p>
    <button class="sos" onclick="enableSystem()">Enable</button>
  </div>
</div>

<header>
  <h1>She-Shield</h1>
  <small>Women Safety Web App</small>
</header>

<div class="card">
  <button class="sos" onclick="criticalSOS()">üö® EMERGENCY SOS</button>
</div>

<div class="card">
  <div class="row">
    <button class="secondary" onclick="startSiren()">üîä Start Siren</button>
    <button class="stop" onclick="stopSiren()">Stop</button>
  </div>
</div>

<div class="card">
  <button class="secondary" onclick="shareLocation()">üìç Share Live Location</button>
</div>

<div class="card">
  <button class="secondary" onclick="startVoice()">üéôÔ∏è Voice SOS (Say ‚Äúhelp‚Äù)</button>
</div>

<div class="card">
  <small id="log">Ready.</small>
</div>

<script>
let audioCtx, osc, gainNode, recognition;

/* ENABLE */
function enableSystem(){
  document.getElementById("enable").style.display="none";
  audioCtx = new (window.AudioContext||webkitAudioContext)();
  audioCtx.resume();
  log("System enabled");
}

/* SIREN */
function startSiren(){
  if(!audioCtx) return alert("Enable first");
  osc = audioCtx.createOscillator();
  gainNode = audioCtx.createGain();
  osc.type="sawtooth";
  osc.frequency.value=700;
  gainNode.gain.value=1;
  osc.connect(gainNode);
  gainNode.connect(audioCtx.destination);
  osc.start();
  navigator.vibrate?.([500,300,500,300]);
  log("Siren ON");
}
function stopSiren(){
  osc?.stop();
  navigator.vibrate?.(0);
  log("Siren OFF");
}

/* LOCATION */
function shareLocation(){
  navigator.geolocation.getCurrentPosition(pos=>{
    const lat=pos.coords.latitude;
    const lon=pos.coords.longitude;
    const msg=`I need help! My location: https://maps.google.com/?q=${lat},${lon}`;
    window.open("https://wa.me/?text="+encodeURIComponent(msg),"_blank");
    log("Location shared");
  },()=>alert("Location permission denied"));
}

/* CRITICAL SOS */
function criticalSOS(){
  startSiren();
  shareLocation();
}

/* VOICE SOS */
function startVoice(){
  const SR = window.SpeechRecognition||window.webkitSpeechRecognition;
  if(!SR) return alert("Voice not supported");
  recognition = new SR();
  recognition.continuous=true;
  recognition.lang="en-US";
  recognition.onresult=e=>{
    const text=e.results[e.results.length-1][0].transcript.toLowerCase();
    log("Voice: "+text);
    if(text.includes("help")||text.includes("sos")){
      criticalSOS();
    }
  };
  recognition.start();
  log("Voice listening‚Ä¶");
}

function log(t){
  document.getElementById("log").innerText=t;
}
</script>

</body>
</html>
